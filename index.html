<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CS480X datavis final project</title>
</head>
<body>
    <h1>Exploring Medicine Side Effects with d3</h1>
    <h2>Most common side effects</h2>
    <svg id="Bubbles"></svg>
    Text description
    <h2>Explore drugs by their side effects</h2>
    <svg id="Bar"></svg>
    Text description
    <h2>Explore the side effects of a certain drug</h2>
    <svg id="Lolipop"></svg>
    Text description
    <button onclick="printSideEffectsMap()">Click me</button>
</body>
</html>

<script src="https://d3js.org/d3.v6.min.js"></script>

<script>

    async function printSideEffects() {

        let masterData = await d3.tsv('master.tsv');
        //console.log(data);
        let sideEffects = new Set();

        for(d of masterData) {

            sideEffects.add(d.SideEffectName);

        }

        console.log(sideEffects);

    }

    async function printSideEffectsMap() {

        let masterData = await d3.tsv('master.tsv');

        let seMap = new Map();

        for(d of masterData) {

            if(seMap.has(d.SideEffectName)) {
                seMap.set(d.SideEffectName, seMap.get(d.SideEffectName) + 1);
            } else {
                seMap.set(d.SideEffectName, 1);
            }

        }

        console.log(seMap);

    }

</script>